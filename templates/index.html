<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Magic Appraisels - Vehicle Appraisal Platform</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="app-container">
        <header class="top-nav">
            <h1 class="header-title">Magic Appraisals</h1>
        </header>

        <div class="main-layout">
            <aside class="sidebar">
            </aside>

            <main class="content-area">
                <div class="page-header">
                    <h1 class="page-title">Vehicle Appraisal Lookup</h1>
                    <p class="page-subtitle">Fill in the details for the vehicle you want to appraise</p>
                </div>

                <div class="form-card">
                    <form id="vehicleForm">
                        <div class="form-grid">
                            <div class="form-field">
                                <label for="vin">VIN</label>
                                <input 
                                    type="text" 
                                    id="vin" 
                                    name="vin" 
                                    maxlength="17" 
                                    required 
                                    placeholder="1HGBH41JXMN109186"
                                    pattern="[A-HJ-NPR-Z0-9]{17}"
                                >
                            </div>

                            <div class="form-field">
                                <label for="odometer">Mileage (km)</label>
                                <input 
                                    type="number" 
                                    id="odometer" 
                                    name="odometer" 
                                    min="0" 
                                    max="999999" 
                                    required 
                                    placeholder="50000"
                                >
                            </div>

                            <div class="form-field">
                                <label for="buyingPrice">Your Buying Price</label>
                                <input 
                                    type="number" 
                                    id="buyingPrice" 
                                    name="buyingPrice" 
                                    min="0" 
                                    max="999999" 
                                    placeholder="25000"
                                >
                            </div>
                        </div>

                        <div class="pricing-section">
                            <h3 class="section-title">Pricing Analysis</h3>
                            <div class="form-grid-2">
                                <div class="form-field">
                                    <label>Estimated Market Value</label>
                                    <input type="text" readonly placeholder="Will be calculated" class="readonly-field">
                                </div>
                                <div class="form-field">
                                    <label>Blackbook Reference</label>
                                    <input type="text" readonly placeholder="Will be fetched" class="readonly-field">
                                </div>
                            </div>
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">Fetch Vehicle Data</button>
                            <button type="button" class="btn btn-secondary" onclick="document.getElementById('vehicleForm').reset()">Clear All Fields</button>
                        </div>
                    </form>
                </div>

                <div id="loadingIndicator" class="loading-state" style="display: none;">
                    <div class="spinner"></div>
                    <p>Fetching vehicle data from Blackbook API...</p>
                </div>

                <div id="errorMessage" class="alert alert-error" style="display: none;"></div>
                <div id="successMessage" class="alert alert-success" style="display: none;"></div>

                <div id="vinDecodeContainer" class="results-section" style="display: none;">
                    <div class="result-card">
                        <h2 class="result-title">üîç Vehicle Information</h2>
                        <div id="vinDecodeContent" class="vin-decode"></div>
                    </div>
                </div>

                <div id="recommendationContainer" class="results-section" style="display: none;">
                    <div class="result-card">
                        <h2 class="result-title">üéØ Auction Buy Recommendation</h2>
                        <div class="form-field" style="margin-bottom: 20px;">
                            <label for="provinceSelector">Select Province/Territory:</label>
                            <select id="provinceSelector" class="province-selector">
                                <option value="Alberta">Alberta</option>
                                <option value="British Columbia">British Columbia</option>
                                <option value="Manitoba">Manitoba</option>
                                <option value="New Brunswick">New Brunswick</option>
                                <option value="Newfoundland and Labrador">Newfoundland and Labrador</option>
                                <option value="Northwest Territories">Northwest Territories</option>
                                <option value="Nova Scotia">Nova Scotia</option>
                                <option value="Nunavut">Nunavut</option>
                                <option value="Ontario" selected>Ontario</option>
                                <option value="Prince Edward Island">Prince Edward Island</option>
                                <option value="Quebec">Quebec</option>
                                <option value="Saskatchewan">Saskatchewan</option>
                                <option value="Yukon">Yukon</option>
                            </select>
                        </div>
                        <div id="recommendationContent" class="recommendation"></div>
                    </div>
                </div>

                <div id="marketTrendsContainer" class="results-section" style="display: none;">
                    <div class="result-card">
                        <h2 class="result-title">üìà Market Trends Analysis</h2>
                        <div id="marketTrendsContent" class="market-trends"></div>
                    </div>
                </div>

                <div id="marketListingsContainer" class="results-section" style="display: none;">
                    <div class="result-card market-priority">
                        <div class="priority-badge">‚ú® REAL MARKET DATA</div>
                        <h2 class="result-title" style="color: #4CAF50;">üöó Actual Cars For Sale Right Now</h2>
                        <p style="color: #666; margin-bottom: 15px;">Real listings from AutoTrader Canada showing what similar vehicles are actually selling for in the Canadian market.</p>
                        <div id="marketSummary" class="market-summary" style="display: none;"></div>
                        <div id="marketListingsGrid" class="market-listings-grid"></div>
                    </div>
                </div>

                <div id="pricingCardsContainer" class="results-section" style="display: none;">
                    <div class="result-card warning-card">
                        <div class="warning-banner">
                            <strong>‚ö†Ô∏è IMPORTANT: Book Values vs Real Market Prices</strong>
                            <p>Blackbook values below are rough condition book values - NOT real market prices. See "Real Market Data" section above for actual asking prices.</p>
                        </div>
                    </div>
                    
                    <h2 class="result-title">üìä Blackbook Reference Values (Rough Condition)</h2>
                    <p style="color: #888; margin-bottom: 20px; font-style: italic;">Raw rough condition book valuations across all 13 Canadian provinces.</p>
                    <div id="pricingCardsGrid" class="pricing-cards-grid"></div>
                </div>
            </main>
        </div>
    </div>

    <script src="/static/script.js"></script>
</body>
</html>
